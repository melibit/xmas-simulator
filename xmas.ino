#include <Adafruit_NeoPixel.h>
#include <avr/pgmspace.h>

#define PIN 8
#define NUM_LEDS 500

Adafruit_NeoPixel strip(NUM_LEDS, PIN, NEO_GRB + NEO_KHZ800);
const int Sorted[NUM_LEDS * 3] PROGMEM = {497,498,488,487,491,489,479,490,478,480,492,494,494,481,493,483,477,482,476,464,469,484,470,467,468,471,485,475,472,462,455,474,465,473,486,457,452,460,463,466,461,456,445,454,453,459,458,449,451,450,448,49,444,438,437,441,421,57,50,439,37,442,429,440,447,36,48,47,443,51,435,436,62,46,52,446,422,61,58,35,424,426,428,60,423,427,434,40,81,41,433,425,65,34,54,69,64,53,68,430,56,59,63,32,431,73,412,38,82,76,74,70,432,67,84,79,420,33,83,418,72,66,415,78,77,75,39,43,55,411,71,419,413,42,410,80,416,417,88,44,85,89,405,403,404,45,400,87,396,86,90,393,409,395,401,414,402,394,386,387,406,399,408,385,392,353,397,398,354,388,407,391,31,390,379,362,382,381,371,374,375,366,389,363,369,370,372,383,373,365,380,355,368,376,367,384,378,29,361,352,91,97,358,356,28,377,96,99,496,357,27,98,25,364,26,360,30,349,359,23,24,95,342,343,348,346,100,344,341,345,22,101,347,339,94,93,340,330,329,324,331,336,337,325,338,351,328,107,106,134,317,126,327,332,334,350,105,21,111,129,316,92,124,335,323,333,140,125,136,319,304,318,326,128,135,320,127,133,315,314,121,139,122,322,130,312,137,321,110,303,113,115,114,104,112,138,109,120,131,132,278,313,123,102,116,147,295,146,141,143,302,145,14,16,298,13,148,118,108,157,117,4,309,296,288,289,15,3,153,11,310,12,119,142,290,151,149,294,2,305,103,311,144,293,306,9,10,160,301,300,256,274,152,272,292,273,297,282,248,20,271,283,247,270,291,150,299,284,253,277,8,161,252,275,276,254,250,6,233,242,307,236,269,234,1,257,281,255,249,235,240,266,308,216,280,286,258,5,218,246,260,267,285,237,217,279,226,265,0,287,232,162,214,241,7,264,268,198,225,251,18,213,227,259,229,19,200,228,243,178,231,245,17,238,239,163,244,215,199,230,158,194,154,171,212,170,197,159,261,186,211,263,165,166,201,210,204,203,164,179,187,205,177,172,262,155,196,189,195,156,220,183,202,209,190,206,224,219,193,222,184,208,180,185,176,188,191,167,182,223,169,168,173,221,207,175,181,192,174, 198,353,352,156,155,170,171,131,154,130,152,182,187,151,379,162,163,35,181,161,329,354,34,160,285,467,172,339,422,211,272,37,184,185,36,114,338,331,115,286,210,423,340,453,454,159,92,157,269,468,438,364,113,0,186,400,317,436,105,360,469,91,106,107,316,132,133,437,355,378,1,341,304,288,342,173,336,337,142,183,284,377,452,455,21,212,356,439,403,402,404,405,332,193,22,51,451,381,424,361,209,189,33,283,351,399,440,401,52,406,2,357,358,425,435,362,470,420,280,281,363,175,23,419,104,282,483,290,289,426,492,493,291,63,64,150,409,441,9,207,481,197,8,476,65,103,292,335,10,129,148,259,260,62,479,480,386,385,213,478,466,71,301,447,5,89,482,408,387,110,174,208,252,407,61,88,7,54,293,109,194,147,50,350,128,6,491,457,326,49,248,116,68,477,456,38,77,66,39,328,145,67,442,149,81,176,427,87,75,410,294,458,86,95,40,450,471,314,267,180,396,231,230,232,224,225,278,235,268,330,236,11,13,464,12,305,463,223,14,421,265,222,306,266,494,494,264,307,418,263,20,308,15,188,108,90,16,19,262,221,446,45,141,74,315,220,18,309,17,219,140,310,261,488,489,311,168,139,287,380,487,472,191,192,383,384,135,359,167,169,138,190,136,313,134,137,382,334,498,333,485,312,486,112,111,473,165,166,164,465,434,411,53,249,484,247,76,214,303,366,244,496,127,250,146,242,490,93,78,228,245,296,229,365,94,327,376,69,32,31,102,246,255,428,143,433,388,144,254,279,253,203,79,448,417,243,43,319,3,398,459,83,389,60,460,277,271,178,241,443,82,375,117,344,412,153,158,397,206,416,44,205,295,41,204,42,177,59,48,200,270,302,195,367,227,413,84,118,390,320,55,80,85,179,126,393,297,318,47,449,24,391,392,324,273,445,432,125,474,226,25,343,414,73,251,46,122,369,323,276,415,72,444,70,201,325,374,371,119,298,121,300,240,299,258,56,202,57,321,431,368,101,430,345,346,100,26,429,322,370,217,218,256,257,27,28,123,373,29,394,395,4,96,275,97,99,124,461,462,475,120,233,234,237,497,58,349,98,196,30,372,215,347,216,348,199,238,239,274, 5,6,330,11,13,12,14,421,216,215,267,32,224,130,180,222,418,396,223,305,104,131,464,173,331,329,15,225,188,402,199,354,33,108,174,175,303,306,221,379,46,48,254,278,253,304,227,220,31,147,449,450,172,200,201,417,432,355,49,228,270,8,9,10,176,105,187,102,103,301,420,368,369,26,179,463,121,122,219,422,148,149,307,226,465,466,34,47,328,27,318,436,435,343,16,101,345,346,344,230,419,448,35,356,437,28,29,217,50,229,302,394,370,371,416,106,431,62,308,377,100,268,433,494,494,59,300,231,451,196,60,378,438,61,395,63,218,203,204,401,493,430,365,405,492,107,171,119,412,452,74,77,78,177,76,233,86,414,269,36,186,403,447,479,234,85,413,79,197,434,88,320,232,127,128,51,98,298,24,319,260,323,75,462,73,87,299,324,478,89,99,297,262,453,454,491,480,178,263,392,389,390,286,258,170,481,423,183,184,391,72,25,84,242,259,446,37,97,22,271,45,264,64,277,80,467,283,393,265,482,284,236,266,235,237,429,23,439,58,239,274,238,202,240,241,120,275,30,497,150,243,347,348,496,205,206,321,244,367,322,123,151,372,124,153,397,349,415,152,398,279,245,2,3,4,21,158,198,81,68,246,373,350,280,281,125,154,325,374,375,207,208,351,399,376,126,251,155,326,156,327,209,159,181,129,7,252,210,211,182,212,352,353,366,44,287,96,411,91,388,410,55,256,381,146,461,71,90,257,380,468,483,56,477,133,255,65,490,282,342,143,317,488,144,66,67,118,0,261,294,455,132,52,145,1,250,20,406,489,400,387,276,428,487,469,470,364,427,117,445,70,336,444,19,460,332,341,476,296,362,316,189,361,363,43,360,357,185,459,135,484,293,295,141,69,116,195,142,386,385,426,134,404,292,17,425,333,18,140,407,456,57,94,95,340,290,168,213,214,194,53,54,157,136,315,42,285,309,337,471,383,358,289,475,424,247,248,310,334,109,249,382,314,93,443,440,291,39,83,273,339,193,335,359,191,338,190,384,115,40,82,192,409,442,139,408,457,114,167,169,441,137,138,474,288,92,472,38,110,458,41,311,498,113,485,272,160,486,161,162,163,473,165,313,111,166,112,312,164};

void setup() {
  strip.begin();
  strip.setBrightness(255);
  strip.show();
}


void sweepPlane(int axis, int r, int g, int b) {
  for (int i = 0; i < NUM_LEDS; i++) {
    int led = pgm_read_word_near(Sorted + i + axis*NUM_LEDS); // read from Flash Sorted[i + axis*500]
    strip.setPixelColor(led, strip.Color(g,r,b));
    strip.show();
    delay(0.5);
  }
  for (int i = 499; i >= 0; i--) {
    int led = pgm_read_word_near(Sorted + i + axis*NUM_LEDS); // read from Flash
    strip.setPixelColor(led, strip.Color(0, 0, 0));
    strip.show();
    delay(0.5);
  }
}


void loop() {
  sweepPlane(0, 0, 0, 255);
  delay(5000);
  sweepPlane(1, 0, 255, 0);
  delay(5000);
  sweepPlane(2, 255, 0, 0);
  delay(5000);
}
